<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SastraWear — Toko Baju</title>
<meta name="description" content="Toko baju modern dengan sentuhan kejawen. Cari, filter, dan beli langsung dari katalog.">
<link rel="preconnect" href="#" />
<style>
  :root{
    --bg: #0b0b0f;
    --card: #121219;
    --muted: #8a8aa0;
    --text: #f1f1f5;
    --brand: #6ee7ff;
    --brand-2: #b388ff;
    --accent: #86efac;
    --danger: #ff7a7a;
    --shadow: 0 10px 30px rgba(0,0,0,.35);
    --radius: 14px;
    --radius-sm: 10px;
    --glass: rgba(255,255,255,.06);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font: 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial;
    color: var(--text); background: radial-gradient(1200px 600px at 10% -10%, #1b1b27 0%, transparent 60%),
              radial-gradient(1400px 800px at 120% 10%, #1a1024 0%, transparent 60%), var(--bg);
  }
  a{color:inherit; text-decoration:none}
  img{max-width:100%; display:block}
  button{cursor:pointer; border:0; background:none; color:inherit}
  .container{max-width:1200px; margin:0 auto; padding:0 20px}
  /* NAV */
  .nav{
    position:sticky; top:0; z-index:50;
    backdrop-filter:saturate(120%) blur(10px);
    background:linear-gradient(180deg, rgba(10,10,16,.85), rgba(10,10,16,.55));
    border-bottom:1px solid rgba(255,255,255,.06);
  }
  .nav-inner{display:flex; align-items:center; justify-content:space-between; gap:16px; padding:14px 0}
  .logo{display:flex; align-items:center; gap:10px; font-weight:700; letter-spacing:.3px}
  .Logo-img{
    height: 34px; 
    width: 34px; 
    object-fit: cover;
    border-radius: 10px;
    background: none;
    box-shadow: inset 0 0 0 1px rgba(255,255,255,S.08), var(--shadow);
  }
  .logo span{font-weight:800}
  .nav-actions{display:flex; align-items:center; gap:10px}
  .btn, .chip{
    border-radius:999px; padding:10px 16px; background:var(--glass); border:1px solid rgba(255,255,255,.08);
    transition:.2s ease; box-shadow: 0 2px 0 rgba(0,0,0,.2);
  }
  .btn:hover{transform: translateY(-1px); background:rgba(255,255,255,.08)}
  .btn.primary{background:linear-gradient(135deg, var(--brand), var(--brand-2)); color:#0d0d13; font-weight:800; border:0}
  .icon-btn{
    display:inline-flex; align-items:center; gap:10px; padding:10px 14px; border-radius:999px; background:var(--glass);
    border:1px solid rgba(255,255,255,.08);
  }
  .cart-count{background:#fff; color:#0b0b0f; font-weight:800; font-size:12px; padding:2px 7px; border-radius:999px}
  /* HERO */
  .hero{padding:48px 0 24px}
  .hero-wrap{
    display:grid; grid-template-columns: 1.1fr .9fr; gap:26px; align-items:center;
  }
  .hero-card{
    padding:28px; border-radius:var(--radius); background:
      radial-gradient(800px 400px at 10% -40%, rgba(110,231,255,.18), transparent 60%),
      radial-gradient(700px 420px at 120% -20%, rgba(179,136,255,.18), transparent 60%),
      linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    border:1px solid rgba(255,255,255,.08);
    box-shadow: var(--shadow);
  }
  .hero h1{font-size: clamp(28px, 3.5vw, 44px); line-height:1.15; margin:0 0 10px; font-weight:900}
  .hero p{margin:0 0 20px; color:var(--muted)}
  .hero-cta{display:flex; gap:10px; flex-wrap:wrap}
  .hero-art{
    position:relative; height:260px; border-radius:var(--radius); overflow:hidden;
    border:1px solid rgba(255,255,255,.08); background:linear-gradient(120deg, #0f1220, #1a0f23);
    box-shadow: var(--shadow);
  }
  .orb{
    position:absolute; border-radius:50%;
    filter: blur(30px); opacity:.9; mix-blend-mode:screen;
    animation: float 9s ease-in-out infinite;
  }
  .orb.a{ width:200px; height:200px; left:-20px; top:-30px; background:#8de9ff }
  .orb.b{ width:260px; height:260px; right:-40px; bottom:-30px; background:#b48cff; animation-delay: -3s }
  .orb.c{ width:140px; height:140px; left:45%; top:20%; background:#7fffb2; animation-delay: -1.4s }
  @keyframes float{
    0%,100%{ transform: translateY(0) }
    50%{ transform: translateY(-10px) }
  }
  
  /* TOOLBAR */
  .toolbar{
    margin:18px 0 8px; display:flex; gap:10px; flex-wrap:wrap; align-items:center;
  }
  .search{flex:1; min-width:240px; display:flex; align-items:center; gap:10px; padding:10px 14px;
    background:var(--glass); border:1px solid rgba(255,255,255,.08); border-radius:999px}
  .search input{flex:1; background:transparent; border:0; outline:none; color:var(--text)}
  .chip{font-size:14px; user-select:none}
  .chip.active{background:linear-gradient(135deg, rgba(110,231,255,.25), rgba(179,136,255,.25)); border-color:transparent}
  .select{padding:10px 12px; border-radius:999px; background:var(--glass); border:1px solid rgba(255,255,255,.08); color:var(--text)}
  /* GRID */
  .grid{display:grid; grid-template-columns: repeat(4, 1fr); gap:16px}
  @media (max-width:1000px){ .hero-wrap{grid-template-columns: 1fr} .grid{grid-template-columns: repeat(2, 1fr)} }
  @media (max-width:560px){ .grid{grid-template-columns: 1fr} }
  .card{
    background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
    border:1px solid rgba(255,255,255,.08); border-radius:var(--radius); overflow:hidden; box-shadow: var(--shadow);
    transition: transform .18s ease, border-color .18s ease;
  }
  .card:hover{ transform: translateY(-4px); border-color: rgba(255,255,255,.18) }
  .thumb{aspect-ratio: 1 / 1; display:grid; place-items:center; background:#0f1220; position:relative}
  .badge{position:absolute; left:10px; top:10px; font-size:12px; padding:4px 8px; border-radius:999px; background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.12)}
  .content{padding:14px}
  .title{font-weight:700; margin:0 0 6px}
  .muted{color:var(--muted); font-size:14px}
  .price{display:flex; align-items:center; justify-content:space-between; margin-top:10px}
  .stars{font-size:13px; letter-spacing:1px}
  .actions{display:flex; gap:8px; margin-top:12px}
  .qty-wrap{display:flex; align-items:center; gap:6px; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.1); border-radius:999px; padding:6px 8px}
  .qty-wrap button{width:26px; height:26px; border-radius:50%; display:grid; place-items:center; background:rgba(255,255,255,.06)}
  /* CART DRAWER */
  .drawer{position:fixed; top:0; right:0; width:360px; max-width:100%; height:100%; background:#0e0f16; border-left:1px solid rgba(255,255,255,.08); box-shadow: -20px 0 60px rgba(0,0,0,.6); transform: translateX(110%); transition:.28s ease; z-index:80; display:flex; flex-direction:column}
  .drawer.open{transform: translateX(0)}
  .drawer header{padding:16px; display:flex; align-items:center; justify-content:space-between; border-bottom:1px solid rgba(255,255,255,.08)}
  .drawer main{padding:12px; overflow:auto; flex:1}
  .cart-item{display:grid; grid-template-columns:64px 1fr auto; gap:10px; padding:10px; border-radius:10px; background:rgba(255,255,255,.04); margin-bottom:10px}
  .cart-img{width:64px; height:64px; border-radius:8px; overflow:hidden; background:#141627; display:grid; place-items:center}
  .cart-total{padding:14px; border-top:1px solid rgba(255,255,255,.08); display:grid; gap:8px}
  .row{display:flex; align-items:center; justify-content:space-between}
  .checkout{padding:12px 16px; border-radius:12px; font-weight:800; background:linear-gradient(135deg, var(--accent), #d1ffec); color:#0a0d0f}
  /* MODAL */
  .modal{position:fixed; inset:0; display:none; place-items:center; background:rgba(0,0,0,.5); z-index:70}
  .modal.open{display:grid}
  .modal-card{width:min(680px, 94vw); background:#0e0f16; border:1px solid rgba(255,255,255,.08); border-radius:16px; overflow:hidden; box-shadow: var(--shadow)}
  .modal-body{display:grid; grid-template-columns: 1fr 1fr}
  @media (max-width:720px){ .modal-body{grid-template-columns:1fr} }
  .modal-img{background:#12142a; min-height:280px; display:grid; place-items:center}
  .modal-content{padding:16px}
  .size, .color{display:flex; flex-wrap:wrap; gap:8px}
  .swatch, .pill{
    border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.04); padding:8px 12px; border-radius:999px; font-size:14px; cursor:pointer;
  }
  .swatch.selected, .pill.selected{outline:2px solid rgba(110,231,255,.7)}
  /* FOOTER */
  footer{margin:30px 0 60px; color:var(--muted); text-align:center}
  /* UTILS */
  .sr{position:absolute; width:1px; height:1px; padding:0; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0}
</style>
</head>
<body>
  <!-- NAV -->
<nav class="nav">
  <div class="container nav-inner">
    <a class="logo" href="#">
      <img src="Logo.JPG" alt="Logo Sastrawear" class="Logo-img">
      <span>SastraWear</span>
    </a>
    <div class="nav-actions">
      <button id="openWish" class="icon-btn" aria-label="Buka Wishlist">♡</button>
      <button id="openCart" class="icon-btn" aria-label="Buka Keranjang">
        🛒 <span class="cart-count" id="cartCount">0</span>
      </button>
    </div>
  </div>
</nav>

  <header class="hero container">
    <div class="hero-wrap">
      <div class="hero-card">
        <h1>Koleksi Busana yang <span style="background:linear-gradient(90deg,var(--brand),var(--brand-2)); -webkit-background-clip:text; background-clip:text; color:transparent">nyaman, modern,</span> & berjiwa <em>sastra</em>.</h1>
        <p>Tiga api kehidupan, satu pena abadi. Sastra Wear, busana yang menuliskan makna.</p>
        <div class="hero-cta">
          <a href="#katalog" class="btn primary">Pre Order Sekarang</a>
          <button class="btn" id="scrollNew">Koleksi Unggulan</button>
        </div>
      </div>
      <div class="hero-art" aria-hidden="true">
        <div class="orb a"></div>
        <div class="orb b"></div>
        <div class="orb c"></div>
      </div>
    </div>
  </header>

  <main class="container" id="katalog">
    <!--Wishlist Drawer-->
<aside class="drawer" id="drawerWish" aria-hidden="true" aria-label="Wishlist">
  <header>
    <strong>Wishlist</strong>
    <button id="closeWish" class="btn">Tutup ✕</button>
  </header>
  <main id="wishList"></main>
</aside>
    <!-- TOOLBAR -->
    <div class="toolbar">
      <div class="search" role="search">
        🔎
        <input id="q" type="search" placeholder="Cari baju: 'kaos', 'hoodie', 'batik'..." autocomplete="off">
      </div>
      <div id="chips" class="toolbar" style="margin:0">
        <button class="chip active" data-cat="Semua">Semua</button>
        <button class="chip" data-cat="Kaos">Kaos</button>
        <button class="chip" data-cat="Kemeja">Kemeja</button>
        <button class="chip" data-cat="Hoodie">Hoodie</button>
        <button class="chip" data-cat="Batik">Batik</button>
      </div>
      <select id="sort" class="select" aria-label="Urutkan">
        <option value="pop">Terpopuler</option>
        <option value="low">Harga: termurah</option>
        <option value="high">Harga: termahal</option>
        <option value="new">Terbaru</option>
      </select>
    </div>

    <!-- GRID -->
    <section class="grid" id="grid" aria-live="polite"></section>
  </main>

  <!-- CART DRAWER -->
  <aside class="drawer" id="drawer" aria-hidden="true" aria-label="Keranjang Belanja">
    <header>
      <strong>Keranjang</strong>
      <button id="closeCart" class="btn">Tutup ✕</button>
    </header>
    <main id="cartList"></main>
    <div class="cart-total">
      <div class="row"><span>Subtotal</span><strong id="subtotal">Rp0</strong></div>
      <div class="row" style="font-size:13px; color:var(--muted)">Belum termasuk ongkir & pajak.</div>
      <button class="checkout" id="checkout">Pre Order</button>
    </div>
  </aside>

  <!-- MODAL QUICK VIEW -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-label="Detail Produk">
    <div class="modal-card">
      <div class="modal-body">
        <div class="modal-img" id="modalImg"></div>
        <div class="modal-content">
          <div style="display:flex; align-items:center; justify-content:space-between; gap:10px">
            <h3 id="modalTitle" style="margin:0"></h3>
            <button class="btn" id="closeModal" aria-label="Tutup">✕</button>
          </div>
          <div class="muted" id="modalDesc" style="margin:6px 0 10px"></div>
          <div><strong id="modalPrice"></strong> · <span class="stars" id="modalStars"></span></div>
          <div style="margin:12px 0">
            <div style="margin-bottom:6px; font-weight:600">Warna</div>
            <div class="color" id="colorWrap"></div>
          </div>
          <div style="margin:12px 0">
            <div style="margin-bottom:6px; font-weight:600">Ukuran</div>
            <div class="size" id="sizeWrap"></div>
          </div>
          <div class="actions">
            <button class="btn primary" id="addFromModal">+ Masukkan Keranjang</button>
            <button class="btn" id="saveWish">♡ Simpan</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer class="container">
    © <span id="year"></span> SastraWear
  </footer>

<script>
/* ---------- Utilities ---------- */
const rupiah = n => n.toLocaleString('id-ID', {style:'currency', currency:'IDR', maximumFractionDigits:0});
const el = sel => document.querySelector(sel);
const els = sel => Array.from(document.querySelectorAll(sel));
const save = (k,v)=> localStorage.setItem(k, JSON.stringify(v));
const load = (k,d=[])=> JSON.parse(localStorage.getItem(k) || JSON.stringify(d));
const svgShirt = (colorA="#9ad9ff", colorB="#b388ff") => `
<svg width="100%" height="100%" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Gambar kaos">
  <defs>
    <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="${colorA}"/>
      <stop offset="100%" stop-color="${colorB}"/>
    </linearGradient>
    <filter id="s"><feDropShadow dx="0" dy="8" stdDeviation="14" flood-opacity=".25"/></filter>
  </defs>
  <rect x="0" y="0" width="512" height="512" rx="28" fill="#0f1220"/>
  <g filter="url(#s)">
    <path d="M256 72c-28 0-52 8-72 20-24 14-46 22-74 22v78l38 20 18 214c2 20 18 36 38 36h142c20 0 36-16 38-36l18-214 38-20v-78c-28 0-50-8-74-22-20-12-44-20-72-20z" fill="url(#g)"/>
  </g>
  <circle cx="404" cy="110" r="10" fill="#fff" opacity=".25"/>
  <text x="256" y="290" fill="#0b0b0f" font-size="72" text-anchor="middle" font-weight="800">SW</text>
</svg>`;
const star = r => "★★★★★☆☆☆☆☆".slice(5 - Math.round(r)) // helper for modal

/* ---------- Sample Data---------- */
const products = [
  {id:'sw01', name:'Kaos Sastra Vol 1', cat:'Kaos', price:120000, new:true, rating:4.6, colors:['Hitam'], sizes:['S','M','L','XL'], desc:'Katun 24s, sablon halus, jatuh nyaman.', img:['assetkaos1.JPG']},
  {id:'sw02', name:'Workshirt Sastra Vol 1', cat:'Kemeja', price:200000, new:true, rating:4.6, colors:['Hitam'], sizes:['S','M','L','XL'], desc:'Katun 24s, sablon halus, jatuh nyaman.', img:[['#9ad9ff','#b388ff']]},

].map((p,i)=> ({...p, createdAt: Date.now() - i*86400000}));

/* ---------- State ---------- */
let state = {
  q:'', cat:'Semua', sort:'pop', cart: load('sw_cart'),
  wishlist: load('sw_wishlist'),
  modalProduct:null, modalColor:0, modalSize:0, dark:true
};
/* ---------- Render Grid ---------- */
const grid = el('#grid');
function filterSort(){
  let list = products.filter(p=>{
    const mQ = state.q.trim().toLowerCase();
    const passQ = !mQ || (p.name.toLowerCase().includes(mQ) || p.cat.toLowerCase().includes(mQ));
    const passC = state.cat==='Semua' || p.cat===state.cat;
    return passQ && passC;
  });
  if(state.sort==='low') list.sort((a,b)=>a.price-b.price);
  if(state.sort==='high') list.sort((a,b)=>b.price-a.price);
  if(state.sort==='new') list.sort((a,b)=>b.createdAt-a.createdAt);
  if(state.sort==='pop') list.sort((a,b)=>b.rating-a.rating);
  return list;
}
function renderGrid(){
  const list = filterSort();
  grid.innerHTML = list.map(p=>{
    const [c1,c2] = p.img[0];
    return `
      <article class="card">
        <div class="thumb">
          ${p.new?`<span class="badge">Baru</span>`:''}
          <img src="${p.img[0]}" alt="${p.name}" style="width:100%; height:100%; object-fit:cover;">
        </div>
        <div class="content">
          <h3 class="title">${p.name}</h3>
          <div class="muted">${p.cat} · ${p.sizes.join(', ')}</div>
          <div class="price">
            <strong>${rupiah(p.price)}</strong>
            <span class="stars" aria-label="Rating ${p.rating} dari 5">★ ${p.rating.toFixed(1)}</span>
          </div>
          <div class="actions">
            <button class="btn" onclick="quickView('${p.id}')">Lihat</button>
            <button class="btn primary" onclick="quickView('${p.id}')">+ Keranjang</button>
          </div>
        </div>
      </article>
    `}).join('');
  if(!list.length){
    grid.innerHTML = `<div class="card" style="padding:20px"><div class="content">
      Tidak ada produk yang cocok. Coba kata kunci lain.</div></div>`;
  }
}

/* ---------- Search, Chips, Sort ---------- */
el('#q').addEventListener('input', (e)=>{ state.q=e.target.value; renderGrid(); });
els('.chip').forEach(ch=>{
  ch.addEventListener('click', ()=>{
    els('.chip').forEach(c=>c.classList.remove('active'));
    ch.classList.add('active');
    state.cat = ch.dataset.cat; renderGrid();
  });
});
el('#sort').addEventListener('change', e=>{ state.sort=e.target.value; renderGrid(); });

/* ---------- Modal ---------- */
const modal = el('#modal');
function quickView(id){
  const p = products.find(x=>x.id===id);
  state.modalProduct = p; state.modalColor=0; state.modalSize=0;
  el('#modalTitle').textContent = p.name;
  el('#modalDesc').textContent = p.desc;
  el('#modalPrice').textContent = rupiah(p.price);
  el('#modalStars').textContent = '★'.repeat(Math.round(p.rating));
  el('#modalImg').innerHTML = `<img src="${p.img[state.modalColor]}" alt="${p.name}" style="width:100%; height:100%; object-fit:cover;">`;
  // colors
  const cw = el('#colorWrap'); cw.innerHTML = '';
  p.colors.forEach((c,i)=>{
    const b = document.createElement('button');
    b.className = 'swatch' + (i===0?' selected':''); b.textContent = c;
    b.onclick = ()=>{ state.modalColor=i; els('#colorWrap .swatch').forEach(s=>s.classList.remove('selected')); b.classList.add('selected'); el('#modalImg').innerHTML = svgShirt(...p.img[i]); }
    cw.appendChild(b);
  });
  // sizes
  const sw = el('#sizeWrap'); sw.innerHTML = '';
  p.sizes.forEach((s,i)=>{
    const b = document.createElement('button');
    b.className = 'pill' + (i===0?' selected':''); b.textContent = s;
    b.onclick = ()=>{ state.modalSize=i; els('#sizeWrap .pill').forEach(x=>x.classList.remove('selected')); b.classList.add('selected'); }
    sw.appendChild(b);
  });
  modal.classList.add('open');
}
el('#closeModal').onclick = ()=> modal.classList.remove('open');
el('#saveWish').onclick = ()=>{ alert('Disimpan ke wishlist (demo).'); };
el('#addFromModal').onclick = ()=>{
  if(!state.modalProduct) return;
  const p = state.modalProduct, colorIndex = state.modalColor, sizeIndex = state.modalSize;
  addToCart(p.id, colorIndex, sizeIndex);
  modal.classList.remove('open');
}

/* ---------- Cart ---------- */
const drawer = el('#drawer'), cartList = el('#cartList'), cartCount = el('#cartCount'), subtotal = el('#subtotal');
el('#openCart').onclick = ()=> openCart(true);
el('#closeCart').onclick = ()=> openCart(false);
function openCart(open){ drawer.classList.toggle('open', open); drawer.setAttribute('aria-hidden', open?'false':'true'); }
function syncCart(){
  save('sw_cart', state.cart);
  cartCount.textContent = state.cart.reduce((a,i)=>a+i.qty,0);
  subtotal.textContent = rupiah(state.cart.reduce((a,i)=>a+i.qty*i.price,0));
  cartList.innerHTML = state.cart.map(item=>`
    <div class="cart-item">
    <div class="cart-img">
      <img src="${item.img}" alt="${item.name}" style="width:100%; height:100%; object-fit:cover;">
    </div>
    <div>
      <div style="font-weight:700">${item.name}</div>
      <div class="muted" style="font-size:13px">Warna: ${item.color} · Uk: ${item.size}</div>
      <div class="qty-wrap" style="margin-top:6px">
        <button onclick="decQty('${item.key}')">−</button>
        <span>${item.qty}</span>
        <button onclick="incQty('${item.key}')">+</button>
        <span style="margin-left:10px; font-weight:700">${rupiah(item.price)}</span>
      </div>
    </div>
    <div>
      <button class="btn" title="Hapus" onclick="removeItem('${item.key}')">🗑️</button>
    </div>
  </div>
`).join('')
}
function addToCart(id, colorIndex=0, sizeIndex=0){
  const p = products.find(x=>x.id===id);
  const color = p.colors[colorIndex] || p.colors[0], size = p.sizes[sizeIndex] || p.sizes[0];
  const key = `${id}-${color}-${size}`;
  const exist = state.cart.find(i=>i.key===key);
  if(exist) exist.qty += 1;
  else state.cart.push({ key, id, name:p.name, price:p.price, qty:1, color, size, img:p.img[colorIndex] });
  syncCart(); openCart(true);
}
function incQty(key){ const it = state.cart.find(i=>i.key===key); if(it){ it.qty++; syncCart(); } }
function decQty(key){ const it = state.cart.find(i=>i.key===key); if(it){ it.qty=Math.max(1,it.qty-1); syncCart(); } }
function removeItem(key){ state.cart = state.cart.filter(i=>i.key!==key); syncCart(); }

/* ---------- Other UI ---------- */
el('#checkout').onclick = ()=>{
  const items = state.cart.map(i=>`${i.qty}x ${i.name} (${i.color}/${i.size})`).join('%0A');
  if(!items){ alert('Keranjang kosong.'); return; }

  const phone = "6285235550784"; // nomor WA tanpa +
  const message = `Halo, saya ingin Pre Order:%0A${items}%0A%0ASubtotal: ${subtotal.textContent}`;

  // versi aman untuk semua device
  const url = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent)
    ? `https://wa.me/${phone}?text=${message}`
    : `https://web.whatsapp.com/send?phone=${phone}&text=${message}`;

  window.open(url, "_blank");
};
el('#scrollNew').onclick = ()=> document.getElementById('katalog').scrollIntoView({behavior:'smooth'});
document.addEventListener('keydown', e=>{ if(e.key==='Escape'){ modal.classList.remove('open'); openCart(false); } });
document.getElementById('year').textContent = new Date().getFullYear();

/* ---------- Wishlist ---------- */
const drawerWish = el('#drawerWish'),
      wishList = el('#wishList');

function openWish(open){
  drawerWish.classList.toggle('open', open);
  drawerWish.setAttribute('aria-hidden', open?'false':'true');
}

el('#openWish').onclick = ()=> openWish(true);
el('#closeWish').onclick = ()=> openWish(false);

function syncWish(){
  save('sw_wishlist', state.wishlist);
  wishList.innerHTML = state.wishlist.map(item=>`
    <div class="cart-item">
      <div class="cart-img">
        <img src="${item.img}" alt="${item.name}" style="width:100%; height:100%; object-fit:cover;">
      </div>
      <div>
        <div style="font-weight:700">${item.name}</div>
        <div class="muted" style="font-size:13px">Warna: ${item.color} · Uk: ${item.size}</div>
        <button class="btn primary" onclick="addToCart('${item.id}')">+ Keranjang</button>
      </div>
      <div>
        <button class="btn" title="Hapus" onclick="removeWish('${item.key}')">🗑️</button>
      </div>
    </div>
  `).join('') || `<div class="muted" style="padding:20px">Wishlist masih kosong.</div>`;
}

function addToWish(id, colorIndex=0, sizeIndex=0){
  const p = products.find(x=>x.id===id);
  const color = p.colors[colorIndex] || p.colors[0];
  const size = p.sizes[sizeIndex] || p.sizes[0];
  const key = `${id}-${color}-${size}`;
  if(!state.wishlist.find(i=>i.key===key)){
    state.wishlist.push({ key, id, name:p.name, color, size, img:p.img[colorIndex] });
    syncWish();
    openWish(true);
  }
}

function removeWish(key){
  const before = state.wishlist.length;
  state.wishlist = state.wishlist.filter(i => i.key !== key);
  if (state.wishlist.length === before) {
    console.warn("Wishlist item tidak ditemukan untuk dihapus:", key);
  }
  syncWish();
}
/* ganti event di tombol Simpan */
el('#saveWish').onclick = ()=>{
  if(!state.modalProduct) return;
  const p = state.modalProduct, colorIndex = state.modalColor, sizeIndex = state.modalSize;
  addToWish(p.id, colorIndex, sizeIndex);
  modal.classList.remove('open');
};
// Bersihkan wishlist yang invalid
state.wishlist = state.wishlist.filter(i => i.color && i.size);
syncWish();

/* ---------- Init ---------- */
syncWish();
renderGrid();
syncCart();
</script>
</body>
</html>